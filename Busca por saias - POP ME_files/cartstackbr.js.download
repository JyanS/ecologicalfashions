var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};var cartstackbr_Class=function(){var b=this;this.debug=!1;this.rcMode=!0;this.cs_found=!1;Object.entries||(Object.entries=function(a){for(var e=Object.keys(a),c=e.length,d=Array(c);c--;)d[c]=[e[c],a[e[c]]];return d});"function"!=typeof xe_getCacheTS&&(window.xe_getCacheTS=function(){return""});this.getProc=function(){var a={newlayer:window.btoa(window.location.href.toLowerCase().split("?")[0]),cartstacktest:-1<window.location.href.toLowerCase().indexOf("cartstacktest=true")||""!=xe_readCookie("cs_debug")||"stage"==xe_core.vm&&(1==xe_core.level||9==xe_core.level)?"true":"",__utmc:"0,0",__utmz:"0",ref:"auto"},e="?";a=$jscomp.makeIterator(Object.entries(a));for(var c=a.next();!c.done;c=a.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;""!=d&&(e+="?"==e?c+"="+d:"&"+c+"="+d)}return"https://app.cartstack.com.br/activeAPI/cnct/proc"+(b.rcMode?"_rc"+(9==xe_core.level?"2":""):"")+".js"+e};this.init=function(){xe_core.vm&&console.log("[CartStack] Extension initing...");window.cartstackAPI={szEmail:"",szCartID:""};window.createCookie=function(){return window.xe_createCookie.apply(this,arguments)};window.readCookie=function(){return window.xe_readCookie.apply(this,arguments)};window.deleteCookie=function(){return window.xe_deleteCookie.apply(this,arguments)};xe_include("https://app.cartstack.com.br/activeAPI/cnct/core"+(b.rcMode?"_rc":"")+".js"+("stage"==xe_core.vm?"?ts="+String(+new Date):""),function(a){a.status&&xe_include(b.getProc(),function(e){e.status&&xe_core.hookEvent(xex_visitor.events.EMAIL_INPUT,function(){var c=Array.prototype.slice.call(arguments);if(xe_core.requireExtension("lgpd")&&!xe_core.callService("cookieConsent","MARKETING,EMAIL_MARKETING"))return!1;if(xe_isset(c[0])){for(var d=1,g=0;g<_cartstack.length;g++)"setEmail"==_cartstack[g][0]&&(_cartstack[g][1]=c[0].email,d=0);d&&_cartstack.push(["setEmail",c[0].email]);cartstackAPI.szEmail=c[0].email;switch(cs_event){case "capture":cs_pro_hit&&csPROHit(!0===cs_pro_hit?void 0:cs_pro_hit);break;case "checkout":cs_debug&&console.log("Email captured... sending cart..."),csAPICall(b.rcMode?"cart":cs_api_urls.cart,function(f){if(!1!==f){for(var k=0,h=0;h<_cartstack.length;h++)"setCartID"==_cartstack[h][0]&&(_cartstack[h][1]=f.cartid,k=1);0==k&&_cartstack.push(["setCartID",f.cartid]);""!=f.email&&xe_createCookie("cartstack.com-strictcart","@",1);createCookie("cartstack.com-cartid",f.cartid,365,!0);cs_debug&&console.log("[CartStack] xex_cartstackbr - @csAPICall(checkout), Strict: "+(""!==f.email?"true":"false"));cartstackAPI.szCartID=f.cartid;cs_debug&&alert(f.debug)}else cs_debug&&console.log("CartStack: Cart API Failed!")})}}else cs_debug&&console.log("CartStack: Email not changed...")})})})};xe_core.requireExtension("lgpd")&&(xe_core.hookEvent(xex_lgpd.events.COOKIE_CONSENT_INIT,function(){xe_core.vm&&console.log("[CartStack] LGPD Extension inited! Lets init...");b.cs_found&&b.init()}),xe_core.hookEvent(xex_lgpd.events.COOKIE_CONSENT,function(){var a=Array.prototype.slice.call(arguments);xe_isset(a[0],"string")&&"DENY"===a[0]&&(cs_debug&&console.log("[CartStack] - User just denied sharing cookies so we frozen any captures already sent to server!"),"function"===typeof cartstack_LGPD&&cartstack_LGPD(_cartstack))}));xe_core.hookEvent(XE_EVENTS.vars.ready,function(){xe_core.requireExtension("datatunnel.js","visitor.js")?document.querySelector('script[src*="activeAPI/load.js"]')?(xe_core.vm&&console.log("[CartStack] XEngine ready! CartStack found..."),b.cs_found=!0,xe_core.requireExtension("lgpd")||(xe_core.vm&&console.log("[CartStack] LGPD Extension loaded... waiting..."),b.init())):xe_core.vm&&console.log("[CartStack] XEngine ready! CartStack not found!"):console.error("Required extensions not loaded...")})},xex_cartstackbr=new cartstackbr_Class;