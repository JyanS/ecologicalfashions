/*! For license information please see init.5dabd06018ee84294200.js.LICENSE.txt */
!function(){"use strict";var e,t,r={724:function(e,t,r){r.d(t,{in:function(){return o},jj:function(){return s}});var n,o,i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(o||(o={}));var s=((n={})[o.DEBUG]="debug",n[o.INFO]="info",n[o.WARN]="warn",n[o.ERROR]="error",n),c=new function(){var e=this;this.loggingLevel=null,this.middlewares=[],this.debug=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.DEBUG,t],i(r),!1)),null!==e.loggingLevel&&o.DEBUG>=e.loggingLevel&&console.debug.apply(console,a([t],i(r),!1))},this.debugNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.DEBUG,t],i(r),!1))},this.error=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.ERROR,t],i(r),!1)),null!==e.loggingLevel&&o.ERROR>=e.loggingLevel&&console.error.apply(console,a([t],i(r),!1))},this.errorNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.ERROR,t],i(r),!1))},this.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.INFO,t],i(r),!1)),null!==e.loggingLevel&&o.INFO>=e.loggingLevel&&console.log.apply(console,a([t],i(r),!1))},this.infoNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.INFO,t],i(r),!1))},this.setLoggingLevel=function(t){e.loggingLevel=t},this.setMiddleware=function(t){e.middlewares.push(t)},this.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.WARN,t],i(r),!1)),null!==e.loggingLevel&&o.WARN>=e.loggingLevel&&console.warn.apply(console,a([t],i(r),!1))},this.warnNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.WARN,t],i(r),!1))},this.processMiddlewares=function(t,r,n){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];e.middlewares.forEach((function(e){return e.apply(void 0,a([t,r,n],i(o),!1))}))}};t.ZP=c},22:function(e,t,r){r.d(t,{VZ:function(){return n},c_:function(){return i},vq:function(){return o}});var n=function(e){var t,r;return null!==e&&"object"==typeof e&&(e instanceof Error||(null===(t=e.constructor.name)||void 0===t?void 0:t.endsWith("Error"))||(null===(r=e.constructor.name)||void 0===r?void 0:r.endsWith("Exception")))},o=function(e){return n(e)&&(e instanceof SyntaxError||"SyntaxError"===e.constructor.name)},i=function(e){return n(t=e)&&(t instanceof DOMException||"DOMException"===t.constructor.name)&&"SecurityError"===e.name;var t}},569:function(e,t,r){r.d(t,{L:function(){return o},h:function(){return n}});var n=function(e){return null!==e&&"object"==typeof e&&"FormData"===e.constructor.name},o=function(e){return null!==e&&"object"==typeof e&&"Blob"===e.constructor.name}},223:function(e,t,r){r.d(t,{L:function(){return o},b:function(){return n}});var n=function(e){var t,r,n=null;try{n=null!==(r=null===(t=e.defaultView)||void 0===t?void 0:t.frameElement)&&void 0!==r?r:null}catch(e){}return n},o=function(e){try{return e.contentDocument}catch(e){}return null}},807:function(e,t,r){r.d(t,{u:function(){return n}});var n=function(e,t){var r,n=new URL(/^https?:\/\//.test(r=e)?r:"https://".concat(r));if(!t)return n;var o=n.pathname;return o.endsWith("/")&&t.startsWith("/")&&(o=o.slice(0,-1)),new URL("".concat(o).concat(t),n.origin)}},727:function(e,t,r){r.d(t,{MN:function(){return n},PA:function(){return i},PJ:function(){return o},Yp:function(){return a}});var n=function(){return window.top===window},o=function(){return window.top!==window&&(window.top===window.parent||void 0)},i=function(e){try{return Boolean(e.location.href)}catch(e){return!1}},a=function(){if(n())return!1;try{return Boolean(window.frameElement)}catch(e){return!1}}},765:function(e,t,r){r.d(t,{t$:function(){return b},E0:function(){return S},BH:function(){return w},jq:function(){return R},x2:function(){return k},O5:function(){return m},iY:function(){return O},R2:function(){return E}});var n=r(807),o=r(724),i=r(593),a=function(){return t=function(){return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){switch(e.label){case 0:return navigator.onLine?[3,2]:[4,new Promise((function(e){var t=function(){window.removeEventListener("online",t),e()};window.addEventListener("online",t),navigator.onLine&&(e(),window.removeEventListener("online",t))}))];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((e=void 0)||(e=Promise))((function(r,n){function o(e){try{a(t.next(e))}catch(e){n(e)}}function i(e){try{a(t.throw(e))}catch(e){n(e)}}function a(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(e){e(n)}))).then(o,i)}a((t=t.apply(void 0,[])).next())}));var e,t},s=r(691),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},d={headers:{}},f={"Content-Type":"text/plain;charset=UTF-8"},p=new Map,v=function(e,t){return l(void 0,void 0,void 0,(function(){var r,l,v,g,y,h,m,w,b,S,O,E=t.abortPreviousRequest,R=t.body,k=t.headers,A=t.baseUrl,T=t.throwOnConvert,I=void 0!==T&&T,_=t.retryCount,L=void 0===_?3:_,P=t.retryInterval,M=void 0===P?1e3:P,K=t.logPayloadOnError,C=void 0!==K&&K,x=t.waitForOnlineStatus,D=void 0!==x&&x,j=t.doNotRetryOnDocumentHidden,N=void 0!==j&&j,B=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["abortPreviousRequest","body","headers","baseUrl","throwOnConvert","retryCount","retryInterval","logPayloadOnError","waitForOnlineStatus","doNotRetryOnDocumentHidden"]);return u(this,(function(t){switch(t.label){case 0:r=n.u(A,e),(l=p.get(r.href))&&E&&(o.ZP.debug("Aborting previous request",r),l.abort("Aborted previous request.")),l=new AbortController,p.set(r.href,l),v=c(c(c(c({},d),{body:R}),B),{signal:l.signal}),void 0===k&&(v.headers=f),y=null,h=performance.now(),m=0,w=-1,S=function(e){var t,n,o,c,d,f;return u(this,(function(u){switch(u.label){case 0:return D?[4,a()]:[3,2];case 1:u.sent(),u.label=2;case 2:w=e,u.label=3;case 3:return u.trys.push([3,11,12,13]),1!==e?[3,5]:(h=performance.now(),[4,fetch(r.href,v)]);case 4:return g=u.sent(),[3,10];case 5:return t=new Promise((function(t){setTimeout((function(){t()}),M*Math.pow(2,e-1))})),n=new Promise((function(e){var t=function(){"hidden"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())};document.addEventListener("visibilitychange",t),"hidden"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())})),[4,Promise.race([t,n])];case 6:if(u.sent(),N&&"hidden"===document.visibilityState)throw new Error("Document is hidden and flag `doNotRetryOnDocumentHidden` is set to true.");return D?[4,a()]:[3,8];case 7:u.sent(),u.label=8;case 8:return h=performance.now(),[4,fetch(r.href,v)];case 9:g=u.sent(),u.label=10;case 10:return b=void 0,[3,13];case 11:if(o=u.sent(),b=o,o instanceof Error&&"AbortError"===o.name)throw p.delete(r.href),new s.M("Request was aborted.",-1,{fetchTotalMs:m,finalRetries:w},l.signal,C?JSON.stringify(R):"Payload not logged.",void 0,o);return e<L&&(!N||"hidden"!==document.visibilityState)?[2,"continue"]:[3,13];case 12:return m=performance.now()-h,[7];case 13:if(p.delete(r.href),!g)throw new s.M("API request to ".concat(r.href," failed due to connection error."),-1,{fetchTotalMs:m,finalRetries:w},l.signal,C?JSON.stringify(R):"Payload not logged.",void 0,b);if(!(g.status>399))return[3,22];u.label=14;case 14:return u.trys.push([14,16,,17]),[4,g.json()];case 15:return y=u.sent(),[3,17];case 16:if((c=u.sent())instanceof Error&&("AbortError"===c.name||"TypeError"===c.name))throw new s.M("API request to ".concat(r.href," failed with status code ").concat(g.status,"."),-1,{fetchTotalMs:m,finalRetries:w},l.signal,"Payload not logged.",g,c);return[3,17];case 17:return u.trys.push([17,20,,21]),y?[3,19]:[4,g.text()];case 18:y=u.sent(),u.label=19;case 19:return[3,21];case 20:if((d=u.sent())instanceof Error&&("AbortError"===d.name||"TypeError"===d.name))throw new s.M("API request to ".concat(r.href," failed with status code ").concat(g.status,"."),-1,{fetchTotalMs:m,finalRetries:w},l.signal,"Payload not logged.",g,d);return[3,21];case 21:throw new s.M("API request to ".concat(r.href," failed with status code ").concat(g.status),g.status,{fetchTotalMs:m,finalRetries:w},l.signal,C?JSON.stringify(R):"Payload not logged.",g,void 0,y);case 22:if(204===g.status)return[2,"break"];u.label=23;case 23:return u.trys.push([23,25,,26]),[4,g.json()];case 24:return y=u.sent(),[2,"break"];case 25:if((f=u.sent())instanceof Error&&("AbortError"===f.name||"TypeError"===f.name)&&e<L)return[2,"continue"];if(I&&f instanceof Error)throw"AbortError"===f.name||"TypeError"===f.name?new s.M("API request to ".concat(r.href," failed due to connection error."),-1,{fetchTotalMs:m,finalRetries:w},l.signal,C?JSON.stringify(R):"Payload not logged.",void 0,b):new i.i("Could not convert data to JSON in ".concat(r.href," request"),{originalError:f,additionalData:{status:g.status,originalErrorName:f.name,originalErrorMessage:f.message,fetchTotalMs:m,finalRetries:w,url:g.url,bodyUsed:g.bodyUsed,ok:g.ok,headers:g.headers?Array.from(g.headers):void 0,type:g.type,redirected:g.redirected,visibility:document.visibilityState,online:navigator.onLine}});if(I)throw new i.i("Unknown error happened during API call. ".concat(JSON.stringify(f)));return[3,26];case 26:return[2]}}))},O=1,t.label=1;case 1:return O<=L?[5,S(O)]:[3,4];case 2:if("break"===t.sent())return[3,4];t.label=3;case 3:return O++,[3,1];case 4:if(void 0===g)throw new i.i("Response object is undefined.",{shouldReport:!0});return[2,{data:y,response:g}]}}))}))},g=function(e,t){var r=t.baseUrl,o=t.body;return l(void 0,void 0,void 0,(function(){var t,i,a;return u(this,(function(s){switch(s.label){case 0:t=n.u(r,e),i=navigator.sendBeacon.bind(navigator),s.label=1;case 1:return s.trys.push([1,2,,7]),[2,i(t.href,o)];case 2:if(!((a=s.sent())instanceof TypeError&&"Illegal invocation"===a.message))return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,fetch(t.href,{method:"POST",body:o,keepalive:!0})];case 4:return s.sent(),[2,!0];case 5:return s.sent(),[2,!1];case 6:throw a;case 7:return[2]}}))}))},y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},h=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},m=function(e){var t=e.config,r=e.sessionId,o=e.visitorId;return y(void 0,void 0,void 0,(function(){var e,i,a,s;return h(this,(function(c){switch(c.label){case 0:return e={key:t.projectKey,sessionId:r,visitorId:o},t.userId&&(e.userId=t.userId),[4,v("/rec/setup-recording/website",{method:"POST",baseUrl:t.managerHost,body:JSON.stringify(e),abortPreviousRequest:!1,throwOnConvert:!0,credentials:"include",logPayloadOnError:!0})];case 1:return i=c.sent(),a=i.data,s=i.response,a.ok&&a.recordingAllowed?(t.isRelayProxy&&(a.recording.assetsHost=n.u(t.host,"/assets").toString(),a.recording.writerHost=n.u(t.host,"/web-writer").toString()),[2,{setupData:a,response:s}]):[2,{setupData:a,response:s}]}}))}))},w=function(e){var t=e.managerHost,r=e.sessionId,n=e.projectKey;return y(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,v("/rec/sessions/".concat(r,"/active?projectKey=").concat(n),{method:"GET",baseUrl:t,abortPreviousRequest:!0,throwOnConvert:!0})];case 1:return[2,e.sent().data]}}))}))},b=function(e){var t=e.assetsHost,r=e.urls;return y(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,v("/cache",{method:"POST",baseUrl:t,body:JSON.stringify(r),abortPreviousRequest:!1,waitForOnlineStatus:!0})];case 1:return e.sent(),[2]}}))}))},S=function(e){var t=e.assetsHost,r=e.urls;return g("/cache",{baseUrl:t,body:JSON.stringify(r)})},O=function(e){var t=e.formData,r=e.writerHost,n=e.recordId,o=e.sessionId,i=e.visitorId;return y(void 0,void 0,void 0,(function(){var e,a;return h(this,(function(s){switch(s.label){case 0:return e="/rec/v3/write",window.URLSearchParams&&(a=new URLSearchParams([["rid",n],["sid",o],["vid",i]]),e+="?".concat(a.toString())),[4,v(e,{method:"POST",baseUrl:r,body:t,headers:{},abortPreviousRequest:!1,waitForOnlineStatus:!0,doNotRetryOnDocumentHidden:!0})];case 1:return[2,s.sent().data]}}))}))},E=function(e){var t=e.formData,r=e.writerHost,n=e.recordId,o=e.sessionId,i=e.visitorId,a=e.isPartialChunk,s="/rec/v3/write";if(window.URLSearchParams){var c=new URLSearchParams([["rid",n],["sid",o],["vid",i],["isPartialChunk",String(a)]]);a||c.delete("isPartialChunk"),s+="?".concat(c.toString())}return g(s,{baseUrl:r,body:t})},R=function(e){var t=e.datadogHost,r=e.payload,n=e.projectKey;return y(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,v("/rec/log/".concat(n),{method:"POST",baseUrl:t,body:JSON.stringify(r),abortPreviousRequest:!1,throwOnConvert:!1})];case 1:return e.sent(),[2]}}))}))},k=function(e){var t=e.datadogHost,r=e.payload,n=e.projectKey;return g("/rec/log/".concat(n),{baseUrl:t,body:JSON.stringify(r)})}},691:function(e,t,r){r.d(t,{M:function(){return i}});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(r,n,o,i,a,s,c,l,u){var d=e.call(this,r)||this;return d.status=n,d.responseTimingData=o,d.requestPayload=a,d.originalError=c,d.responseData=l,d.additionalData=u,d.name="ApiError",Object.setPrototypeOf(d,t.prototype),d.responseDebugData=s?function(e){return{url:e.url,bodyUsed:e.bodyUsed,ok:e.ok,headers:e.headers?Array.from(e.headers):void 0,type:e.type,redirected:e.redirected}}(s):void 0,d.isSignalAborted=null==i?void 0:i.aborted,d.visibilityState=document.visibilityState,d.isOffline=!1===navigator.onLine,d.wasBeaconFallbackUsed=!1,d}return o(t,e),Object.defineProperty(t.prototype,"isConnectionError",{get:function(){return this.status<0&&!this.isAbortedByRecorder&&!this.isAbortedByUserAgent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAbortedByRecorder",{get:function(){return this.isSignalAborted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAbortedByUserAgent",{get:function(){var e;return this.originalError instanceof Error&&"AbortError"===(null===(e=this.originalError)||void 0===e?void 0:e.name)&&!this.isSignalAborted},enumerable:!1,configurable:!0}),t}(Error)},918:function(e,t,r){var n;r.d(t,{LT:function(){return i},hd:function(){return a},lL:function(){return n},ot:function(){return o}}),function(e){e.ACKNOWLEDGED="SL__ACKNOWLEDGED",e.DISCOVERY="SL__DISCOVERY",e.DISCOVERED="SL__DISCOVERED",e.USER_ACTIVITY="SL__USER_ACTIVITY",e.STOP_RECORDING="SL__STOP_RECORD",e.START_RECORDING="SL__START_RECORDING"}(n||(n={}));var o=function(e){if(e&&"object"==typeof e&&Object.hasOwn(e,"name")){var t=e.name;if("string"==typeof t&&t.startsWith("SL__"))return!0}return!1},i=function(e){return e.name===n.DISCOVERY},a=function(e){return e.name===n.DISCOVERED}},593:function(e,t,r){r.d(t,{F:function(){return c},i:function(){return s}});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e){function t(r,n){var o=void 0===n?{}:n,i=o.shouldReport,a=void 0===i||i,s=o.additionalData,c=void 0===s?{}:s,l=o.originalError,u=e.call(this,r)||this;return Object.setPrototypeOf(u,t.prototype),u.name="RecorderError",u.additionalData=c,u.shouldReport=a,l&&(u.originalName=l.name,u.originalStack=l.stack,u.originalMessage=l.message,u.originalError=l),l instanceof t&&(u.originalAdditionalData=l.additionalData),u}return o(t,e),t.prototype.toJSON=function(){return{name:this.name,originalName:this.originalName,message:this.message,shouldReport:this.shouldReport,additionalData:this.additionalData,stack:this.stack,originalStack:this.originalStack,originalAdditionalData:this.originalAdditionalData,originalMessage:this.originalMessage,originalError:this.originalError}},t}(Error),c=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,a([],i(r),!1))||this;return Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t}(s)},382:function(e,t,r){r.d(t,{$:function(){return n}});var n=function(e){return void 0===e.isTrusted||e.isTrusted}},253:function(e,t,r){r.d(t,{O:function(){return n}});var n=function(){return void 0===e&&(e=21),crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")}),"");var e}},246:function(e,t,r){r.d(t,{K:function(){return d},d:function(){return f}});var n=r(724),o=r(765),i=r(691),a=r(593),s=r(253),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},u=function(e,t,r){return c(void 0,void 0,void 0,(function(){var s;return l(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),n.ZP.debug("Calling active endpoint in init."),[4,(0,o.BH)({sessionId:e,managerHost:t.managerHost,projectKey:t.projectKey})];case 1:return[2,c.sent()];case 2:return(s=c.sent())instanceof i.M?(s.isConnectionError||n.ZP.error("/active call failed on network error.",s),404===s.status&&r.clearStorage()):s instanceof a.i?s.shouldReport&&n.ZP.error("/active call failed on recorder error.",s):n.ZP.error("/active call failed on unknown error.",s),[3,3];case 3:return[2,null]}}))}))},d=function(e,t){var r,n,o,i,a=[],s=t.getCookieMetadataForProjectKey(e.projectKey);a.push({sessionId:null!==(r=null==s?void 0:s.sessionId)&&void 0!==r?r:null,visitorId:null!==(n=null==s?void 0:s.visitorId)&&void 0!==n?n:null});var c=t.getLocalStorageMetadataForProjectKey(e.projectKey),l=null!==(o=null==c?void 0:c.sessionId)&&void 0!==o?o:null,u=null!==(i=null==c?void 0:c.visitorId)&&void 0!==i?i:null;return a[0].sessionId===l&&a[0].visitorId===u||a.push({sessionId:l,visitorId:u}),a},f=function(e,t,r,n){return void 0===n&&(n=[]),c(void 0,void 0,void 0,(function(){var o,i,a,c,d,f,p,v,g,y;return l(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,7]),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next(),l.label=1;case 1:return i.done?[3,4]:(a=i.value).sessionId?n.includes(a.sessionId)?[3,3]:[4,u(a.sessionId,t,r)]:[3,3];case 2:if(null==(c=l.sent())?void 0:c.isActive)return[2,{sessionId:a.sessionId,visitorId:null!==(v=a.visitorId)&&void 0!==v?v:(0,s.O)(),sessionTimeRemaining:c.sessionTimeRemaining}];l.label=3;case 3:return i=o.next(),[3,1];case 4:return[3,7];case 5:return d=l.sent(),f={error:d},[3,7];case 6:try{i&&!i.done&&(p=o.return)&&p.call(o)}finally{if(f)throw f.error}return[7];case 7:return[2,{sessionId:(0,s.O)(),visitorId:null!==(y=null===(g=e.find((function(e){return null!==e.visitorId})))||void 0===g?void 0:g.visitorId)&&void 0!==y?y:(0,s.O)()}]}}))}))}},506:function(e,t,r){r.d(t,{P:function(){return c},v:function(){return l}});var n=r(569),o=r(22),i=r(621),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},c=function(e,t){try{return(0,i.K)(l(e),t).stringified}catch(e){return JSON.stringify("[non-serializable object]")}},l=function(e,t){return void 0===t&&(t=new WeakMap),Array.isArray(e)?e.map((function(e){return l(e,t)})):"object"==typeof e&&null!==e?u(e,t):["function","symbol","bigint","undefined"].includes(typeof e)?typeof e:null===e||"number"==typeof e||"string"==typeof e?e:JSON.stringify(e)},u=function(e,t){var r,i=Object.keys(e);if(n.h(e)){var c={};e.forEach((function(e,t){c[t]="string"==typeof e?e:"[file:".concat(e.type,"][").concat(e.name,"]")})),r=c}else if(o.VZ(e)&&!Object.hasOwn(e,"toJSON"))r=f(e);else if(1===i.length&&"isTrusted"===i[0]){var l=Object.keys(Object.getPrototypeOf(e));r=JSON.parse(JSON.stringify(e,s(s([],a(i),!1),a(l),!1)))}else r=d(t,e);return r},d=function(e,t){var r,n;if(e.has(t))return"[circular]";e.set(t,!0);var o=[];try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(t)),s=i.next();!s.done;s=i.next()){var c=a(s.value,2),u=c[0],d=c[1];o.push([u,l(d,e)])}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return Object.fromEntries(o)},f=function(e){var t=JSON.parse(JSON.stringify(e));return t.name||(t.name=e.name),t.stack||(t.stack=e.stack),t.message||(t.message=e.message),t}},621:function(e,t,r){r.d(t,{K:function(){return s}});var n=r(506),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a="[smartlook-truncated]",s=function(e,t){void 0===t&&(t=16384);var r=JSON.stringify(e);return r.length<=t?{isTruncated:!1,stringified:r}:(Array.isArray(e)?r=function(e,t){var r,i,s="";try{for(var c=o(e),l=c.next();!l.done;l=c.next()){var u=l.value;if(t<=0){s+=JSON.stringify(a)+",";break}var d=(0,n.P)(u,t)+",";s+=d,t-=d.length}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return"["+s.slice(0,Math.max(0,s.length-1))+"]"}(e,t):"object"==typeof e&&null!==e?r=function(e,t){var r,s,c="";try{for(var l=o(Object.entries(e)),u=l.next();!u.done;u=l.next()){var d=i(u.value,2),f=d[0],p=d[1];if(t<=0){c+=JSON.stringify(a)+":true,";break}var v='"'.concat(f,'":').concat((0,n.P)(p,t),",");c+=v,t-=v.length}}catch(e){r={error:e}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return"{"+c.slice(0,Math.max(0,c.length-1))+"}"}(e,t):"string"==typeof e?r=JSON.stringify(a+"[string] "+e.slice(0,Math.max(0,t))):"number"==typeof e&&(r=JSON.stringify(a+"[number] "+String(e).slice(0,Math.max(0,t)))),{isTruncated:!0,stringified:r})}},35:function(e,t,r){r.d(t,{X:function(){return l}});var n=r(223),o=r(724),i=r(918),a=r(382),s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=["mousemove","click","keypress","touchmove","drag","wheel","mouseover"],l=function(e){return r=function(){var t,r,l,u,d,f,p,v,g,y,h,m,w,b,S;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(O){switch(O.label){case 0:t=Array.from(document.querySelectorAll("iframe")),r=[document];try{for(l=s(t),u=l.next();!u.done;u=l.next())d=u.value,(f=n.L(d))&&r.push(f)}catch(e){m={error:e}}finally{try{u&&!u.done&&(w=l.return)&&w.call(l)}finally{if(m)throw m.error}}return p=[],v=c.map((function(e){return new Promise((function(t){var n,o,i=function(e){(0,a.$)(e)&&t()},c=function(t){p.push((function(){return t.removeEventListener(e,i,!0)})),t.addEventListener(e,i,!0)};try{for(var l=s(r),u=l.next();!u.done;u=l.next())c(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}))})),e&&v.push(e.waitForEventFromAnySource(i.lL.USER_ACTIVITY)),[4,Promise.any(v)];case 1:O.sent();try{for(g=s(p),y=g.next();!y.done;y=g.next()){h=y.value;try{h()}catch(e){o.ZP.debug("Listener could not be removed",e)}}}catch(e){b={error:e}}finally{try{y&&!y.done&&(S=g.return)&&S.call(g)}finally{if(b)throw b.error}}return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function o(e){try{a(r.next(e))}catch(e){n(e)}}function i(e){try{a(r.throw(e))}catch(e){n(e)}}function a(r){var n;r.done?e(r.value):(n=r.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}a((r=r.apply(void 0,[])).next())}));var t,r}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,o),i.exports}o.m=r,o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,r){return o.f[r](e,t),t}),[]))},o.u=function(e){return"bundle.11df39278213f1a88e96.js"},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="@smartlook/recorder:",o.l=function(r,n,i,a){if(e[r])e[r].push(n);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[n];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="",function(){var e={410:0};o.f.j=function(t,r){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((function(r,o){n=e[t]=[r,o]}));r.push(n[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,(function(r){if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var n,i,a=r[0],s=r[1],c=r[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);c&&c(o)}for(t&&t(r);l<a.length;l++)i=a[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk_smartlook_recorder=self.webpackChunk_smartlook_recorder||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e,t,r,n,i=o(724),a=o(727),s=o(765),c=o(691),l=o(807),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},d={eu:"manager.eu.smartlook.cloud",us:"manager.us.smartlook.cloud"},f={banTime:3e5,enableCompression:!0,enableRecordingOfAutomationFrameworks:!1,externalLogging:!0,forceSetupData:null,host:d.eu,managerHost:d.eu,network:!1,upload:function(){return null},cookies:!0,loggingLevel:i.in.ERROR,userId:null,uploadInterval:7500,record:{},region:"eu",startRecordingAfterUserActivity:!0,storageKeys:{SMARTLOOK_BAN_REASON:"smartlook_ban_reason",SMARTLOOK_BAN_EXPIRE:"smartlook_ban_expire",SMARTLOOK_COOKIE_DOMAIN:"SL_C_23361dd035530_DOMAIN",SMARTLOOK_COOKIE_KEY:"SL_C_23361dd035530_KEY",SMARTLOOK_COOKIE_SID:"SL_C_23361dd035530_SID",SMARTLOOK_COOKIE_VID:"SL_C_23361dd035530_VID",SMARTLOOK_DEBUG:"smartlook_debug",SMARTLOOK_LS_KEY:"SL_L_23361dd035530_KEY",SMARTLOOK_LS_SID:"SL_L_23361dd035530_SID",SMARTLOOK_LS_VID:"SL_L_23361dd035530_VID",SMARTLOOK_SETUP_RETRY_AFTER:"smartlook_setup_retry_after",SMARTLOOK_SETUP_RETRY_AFTER_REASON:"smartlook_setup_retry_after_reason"},isRelayProxy:!1,isSmartsupp:!1,parentFrameElementId:null,relativeParentTimeStart:0,frameElementId:null,frameMetadata:null,get isCrossOriginIframeMode(){return null!==this.frameElementId}},p=function(e,t,r){var n=Object.assign(f,u(u({},r),{projectKey:e,recorderVersion:t}));if(r.host){n.managerHost=n.host;var o=l.u(r.host);(!o.host.endsWith("smartlook.cloud")&&!o.host.endsWith("smartlook.com")||o.host.endsWith("smartlook.cloud")&&o.host.includes("relay-proxy"))&&(n.managerHost=new URL("/manager",o).toString(),n.isRelayProxy=!0)}else if(r.region){var i=d[r.region];if(void 0===i)throw new Error("Unknown region");n.host=i,n.managerHost=i}return"f2353f89c956e0b7a93a0ab1b5cfbf01725acab2"===e&&(n.host=d.us,n.managerHost=d.us),n},v=o(918),g=o(593),y=o(253),h=function(){return!!window.navigator.userAgent.includes("BingPreview")||!!window.navigator.userAgent.includes("adidxbot")||!!window.navigator.userAgent.includes("Bingbot")},m=function(){return void 0!==Number.parseInt},w=o(246),b=function(){return!!a.Yp()&&window.parent&&void 0!==window.parent.smartlook},S=function(e){return!(!window.parent||!window.parent.smartlook||"string"!=typeof window.parent.smartlook.key||window.parent.smartlook.key!==e)},O=function(){return t=function(){var e;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){e=setInterval((function(){var r,n;void 0!==(null===(n=null===(r=window.parent)||void 0===r?void 0:r.smartlook)||void 0===n?void 0:n.key)&&(void 0!==e&&(clearInterval(e),e=void 0),t())}),100)}))];case 1:return t.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(r,n){function o(e){try{a(t.next(e))}catch(e){n(e)}}function i(e){try{a(t.throw(e))}catch(e){n(e)}}function a(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(e){e(n)}))).then(o,i)}a((t=t.apply(void 0,[])).next())}));var e,t},E=o(35),R=function(e,t,r,n,o,i){if(void 0===window.smartlook.recorderClass)throw new g.i("Cannot initialize Smartlook. Smartlook class is not present.");window.smartlook.recorder=new window.smartlook.recorderClass(e,t,r,n,o,i)},k=function(e,t){for(var r=e.domain,n=r.split("."),o=0;o<n.length-1&&!e.cookie.includes("".concat(t,"=true"));)o+=1,r=n.slice(-1-o).join("."),e.cookie="".concat(t,"=true;domain=").concat(r,";path=/;sameSite=strict;secure");return e.cookie="".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(r,";path=/;sameSite=strict;secure"),r},A=function(){function e(t){var r=t.useCookies,n=t.storageKeys;this.useCookies=r,this.storageKeys=n,e.removeFromLocalStorage("SL_CANVAS_STARTED"),e.removeFromLocalStorage("SL_CROSS_ORIGIN_IFRAME_STARTED");var o=e.getAllValuesOfCookieAndRemoveIt(this.storageKeys.SMARTLOOK_COOKIE_SID);o.length>0&&this.setCookie(this.storageKeys.SMARTLOOK_COOKIE_SID,o[0]);var i=e.getAllValuesOfCookieAndRemoveIt(this.storageKeys.SMARTLOOK_COOKIE_VID);i.length>0&&this.setCookie(this.storageKeys.SMARTLOOK_COOKIE_VID,i[0]);var a=e.getAllValuesOfCookieAndRemoveIt(this.storageKeys.SMARTLOOK_COOKIE_KEY);a.length>0&&this.setCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY,a[0])}return e.getLocalStorage=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},e.removeFromLocalStorage=function(e){try{window.localStorage.removeItem(e)}catch(e){}},e.setLocalStorage=function(e,t){try{return window.localStorage.setItem(e,t),!0}catch(e){return!1}},e.prototype.clearStorage=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER_REASON),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_DEBUG),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_LS_KEY),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_LS_SID),e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_LS_VID),this.useCookies&&(this.removeCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY),this.removeCookie(this.storageKeys.SMARTLOOK_COOKIE_SID),this.removeCookie(this.storageKeys.SMARTLOOK_COOKIE_VID))},e.prototype.getBanExpire=function(){return e.getLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE)},e.prototype.getBanReason=function(){return e.getLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON)},e.prototype.getCookieMetadataForProjectKey=function(t){return this.useCookies?t!==e.getCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY)?null:{sessionId:e.getCookie(this.storageKeys.SMARTLOOK_COOKIE_SID),visitorId:e.getCookie(this.storageKeys.SMARTLOOK_COOKIE_VID)}:null},e.prototype.getLocalStorageMetadataForProjectKey=function(t){return t!==e.getLocalStorage(this.storageKeys.SMARTLOOK_LS_KEY)?null:{sessionId:e.getLocalStorage(this.storageKeys.SMARTLOOK_LS_SID),visitorId:e.getLocalStorage(this.storageKeys.SMARTLOOK_LS_VID)}},e.prototype.getSetupRetryAfterExpire=function(){return e.getLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER)},e.prototype.getSetupRetryAfterExpireReason=function(){return e.getLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER_REASON)},e.prototype.isRecorderInDebugMode=function(){return Boolean(e.getLocalStorage(this.storageKeys.SMARTLOOK_DEBUG))},e.prototype.removeBanExpire=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE)},e.prototype.removeBanReason=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON)},e.prototype.removeSetupAfterExpire=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER)},e.prototype.removeSetupAfterExpireReason=function(){e.removeFromLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER_REASON)},e.prototype.setBanExpire=function(t){e.setLocalStorage(this.storageKeys.SMARTLOOK_BAN_EXPIRE,t)},e.prototype.setBanReason=function(t){e.setLocalStorage(this.storageKeys.SMARTLOOK_BAN_REASON,t)},e.prototype.setMetadata=function(e,t,r){this.setCookieMetadata(e,t,r),this.setLocalStorageMetadata(e,t,r)},e.prototype.setSetupRetryAfter=function(t){e.setLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER,t)},e.prototype.setSetupRetryAfterReason=function(t){e.setLocalStorage(this.storageKeys.SMARTLOOK_SETUP_RETRY_AFTER_REASON,t)},e.getAllCookies=function(e){var t=document.cookie.split(";"),r=[];try{for(var n=0;n<t.length;n+=1){var o=t[n].trim().split("=");o[0]===e&&r.push(o[1])}}catch(e){}return r},e.getAllValuesOfCookieAndRemoveIt=function(t){var r=window.document.domain,n=e.getAllCookies(t);try{for(var o=r.split("."),a=0;a<o.length-1&&window.document.cookie.includes("".concat(t));)a+=1,r=o.slice(-1-a).join("."),window.document.cookie="".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(r,";path=/;sameSite=strict;secure")}catch(e){i.ZP.errorNoConsole("Removing cookies failed.",e)}return n.reverse()},e.getCookie=function(e){var t=document.cookie.split(";");try{for(var r=0;r<t.length;r+=1){var n=t[r].trim().split("=");if(n[0]===e)return n[1]}}catch(e){}return null},e.getCookieExpirationDate=function(){var e=new Date;return e.setMonth(e.getMonth()+13),e.toUTCString()},e.prototype.removeCookie=function(e){window.document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(k(document,this.storageKeys.SMARTLOOK_COOKIE_DOMAIN),";path=/")},e.prototype.setCookie=function(t,r){r&&(window.document.cookie="".concat(t,"=").concat(r,";expires=").concat(e.getCookieExpirationDate(),";domain=").concat(k(document,this.storageKeys.SMARTLOOK_COOKIE_DOMAIN),";path=/;sameSite=strict;secure"))},e.prototype.setCookieMetadata=function(e,t,r){this.useCookies&&(this.setCookie(this.storageKeys.SMARTLOOK_COOKIE_KEY,r),this.setCookie(this.storageKeys.SMARTLOOK_COOKIE_SID,e),this.setCookie(this.storageKeys.SMARTLOOK_COOKIE_VID,t))},e.prototype.setLocalStorageMetadata=function(t,r,n){e.setLocalStorage(this.storageKeys.SMARTLOOK_LS_KEY,n),e.setLocalStorage(this.storageKeys.SMARTLOOK_LS_SID,t),e.setLocalStorage(this.storageKeys.SMARTLOOK_LS_VID,r)},e}(),T=function(){function e(){}return e.prototype.getServerTime=function(){if(void 0===this.lastServerTime||void 0===this.relativeTimeSinceLastServerTimeSet)throw new g.i("Server time is undefined",{shouldReport:!0,additionalData:{lastServerTime:this.lastServerTime,relativeTimeSinceLastServerTimeSet:this.relativeTimeSinceLastServerTimeSet}});return new Date(this.lastServerTime.getTime()+performance.now()-this.relativeTimeSinceLastServerTimeSet)},e.prototype.getServerTimeISOString=function(){return this.getServerTime().toISOString()},e.prototype.setServerTime=function(e){this.lastServerTime=new Date(e),this.relativeTimeSinceLastServerTimeSet=performance.now()},e}(),I=function(){function e(e,t,r,n){var o=this;if(this.persistentStorageManager=e,this.startRecording=t,this.stopRecording=r,this.banTime=n,this.isAppliedBan(!0)){var a=this.persistentStorageManager.getBanExpire();if(a){var s=Number.parseInt(a,10)-Date.now();s>0&&(i.ZP.debug("BAN is applied. Waiting ".concat(s,"ms.")),this.banTimeoutId=setTimeout((function(){o.banTimeoutId=void 0,o.startRecording()}),s))}}}return e.prototype.applyBan=function(e){var t=this;if("hidden"!==document.visibilityState){e.shouldReport&&i.ZP.error('Applying ban. Reason: "'.concat(e.message,'".'),e);var r=Date.now()+this.banTime;if(this.persistentStorageManager.setBanExpire(r.toString()),this.persistentStorageManager.setBanReason(e.message),void 0===this.banTimeoutId)try{this.stopRecording()}catch(e){}else clearTimeout(this.banTimeoutId);this.banTimeoutId=setTimeout((function(){t.banTimeoutId=void 0;try{t.startRecording()}catch(t){i.ZP.error("Cannot start recording after BAN expired",t,{banReason:e.message})}}),this.banTime)}},e.prototype.getBanReason=function(){var e;return null!==(e=this.persistentStorageManager.getBanReason())&&void 0!==e?e:""},e.prototype.isAppliedBan=function(e){if(void 0===e&&(e=!1),!e)return void 0!==this.banTimeoutId;var t=this.persistentStorageManager.getBanExpire();return!!(t&&Number.parseInt(t,10)>Date.now())||(this.persistentStorageManager.removeBanExpire(),this.persistentStorageManager.removeBanReason(),!1)},e}(),_=o(382),L=o(506),P=function(){return P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)},M=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},K=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},C=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},x=function(){function e(e){var t=this;this.config=e,this.logMessagesCache=new Map,this.logsToSend=[],this.uuid=(0,y.O)(),this.sendLog=function(e,r,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];if(r===i.in.ERROR||"internal"===e){var s=t.logMessagesCache.get(n),c=performance.now();if(t.logMessagesCache.set(n,c),void 0!==s&&c-s<1e3)return;t.logsToSend.push(t.createLog.apply(t,C([n,r],K(o),!1))),"hidden"===document.visibilityState&&t.processLogs()}},this.createLog=function(e,r){for(var n,o,a,s,c,l,u,d,f,p=[],v=2;v<arguments.length;v++)p[v-2]=arguments[v];var g=Object.fromEntries(p.map((function(e,t){return[t,JSON.parse((0,L.P)(e))]}))),y=t.config,h=(y.userId,M(y,["userId"]));return{message:e,context:P({origin:null!==(n=window.location.origin)&&void 0!==n?n:"unknown",playUrl:null!==(o=window.smartlook.playUrl)&&void 0!==o?o:"unknown",visitorId:null!==(a=window.smartlook.visitorId)&&void 0!==a?a:"unknown",sessionId:null!==(s=window.smartlook.sessionId)&&void 0!==s?s:"unknown",recordId:null!==(c=window.smartlook.recordId)&&void 0!==c?c:"unknown",uuid:t.uuid,url:null!==(u=null===(l=window.location)||void 0===l?void 0:l.href)&&void 0!==u?u:"unknown",userAgent:null!==(f=null===(d=window.navigator)||void 0===d?void 0:d.userAgent)&&void 0!==f?f:"unknown",datadogHost:t.config.managerHost,visibilityState:document.visibilityState,config:h,apiCallHistory:window.smartlook._apiCallsHistory},g),severity:i.jj[r],tags:{},timestamp:Date.now()}},this.handleError=function(e){e.error instanceof g.i&&e.error.shouldReport&&(t.logsToSend.push(t.createLog("Uncaught error: ".concat(e.error),i.in.ERROR,e.error)),"hidden"===document.visibilityState&&t.processLogs())},this.handlePromiseRejection=function(e){var r;if(e.reason instanceof g.i&&e.reason.shouldReport){if("string"==typeof(null===(r=e.reason.additionalData)||void 0===r?void 0:r.message)&&(e.reason.additionalData.message.includes("Cannot set properties of undefined (setting 'sessionManager')")||e.reason.additionalData.message.includes("undefined is not an object (evaluating 'this.sessionManager=e')")||e.reason.additionalData.message.includes("this is undefined")||e.reason.additionalData.message.includes("Unable to set property 'sessionManager' of undefined or null reference")))return;t.logsToSend.push(t.createLog("Unhandled promise rejection: ".concat(e.reason),i.in.ERROR,e.reason)),"hidden"===document.visibilityState&&t.processLogs()}},this.processLogIntervalId=setInterval((function(){t.processLogs()}),this.config.uploadInterval),window.addEventListener("error",this.handleError,!0),window.addEventListener("unhandledrejection",this.handlePromiseRejection,!0),document.addEventListener("visibilitychange",(function(e){(0,_.$)(e)&&"hidden"===document.visibilityState&&(t.processLogs(),setTimeout((function(){t.processLogs()}),500))}),!0)}return e.prototype.processLogs=function(){return e=this,r=function(){var e,t,r,n;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(o){switch(o.label){case 0:if(!(this.logsToSend.length>0))return[3,7];e=this.logsToSend,this.logsToSend=[],t={tags:{platform:"web",sdkVersion:this.config.recorderVersion,userAgent:navigator.userAgent},logs:e},o.label=1;case 1:return o.trys.push([1,6,,7]),"visible"!==document.visibilityState?[3,3]:[4,(0,s.jq)({datadogHost:this.config.managerHost,payload:t,projectKey:this.config.projectKey})];case 2:return o.sent(),[3,5];case 3:return[4,(0,s.x2)({datadogHost:this.config.managerHost,payload:t,projectKey:this.config.projectKey})];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return(r=o.sent())instanceof c.M&&422===r.status||(n=this.logsToSend).push.apply(n,C([],K(e),!1)),[3,7];case 7:return[2]}}))},new((t=void 0)||(t=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}));var e,t,r},e}(),D=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},j=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},N=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},B=function(e){var t=this;this.projectKey=e,this.discoveredIframeWindows=new Set,this.eventListenersByEventType=new Map,this.isClosed=!1,this.pendingEventsByMessageEventSource=new Map,this.waitingListenersByEventType=new Map,this.waitingListenersByEventTypeByMessageEventSource=new Map,this.addPostMessageEventListener=function(e,r){var n=t.eventListenersByEventType.get(e);n?n.push(r):t.eventListenersByEventType.set(e,[r])},this.broadcastEventToAllDiscoveredIframes=function(e){t.discoveredIframeWindows.forEach((function(t){t.postMessage(e,"*")}))},this.close=function(){t.isClosed=!0},this.isTherePendingEvent=function(e,r){var n,o=t.pendingEventsByMessageEventSource.get(r);if(o){var a=(null!==(n=o.get(e))&&void 0!==n?n:[]).filter((function(t){return t.name===e}));if(a.length>0)return a.length>1&&i.ZP.warn("Received multiple events. Taking first received."),!0}return!1},this.sendEventToSource=function(e,t){i.ZP.debug("Sending ".concat(e.name," event to different source."),e,t),t.postMessage(e,"*")},this.waitForEventFromAnySource=function(e){return D(t,void 0,void 0,(function(){var t,r,n,o,a,s,c,l,u,d,f;return j(this,(function(p){switch(p.label){case 0:try{for(t=N(this.pendingEventsByMessageEventSource.values()),r=t.next();!r.done;r=t.next())if(n=r.value,o=null!==(f=n.get(e))&&void 0!==f?f:[],(a=o.filter((function(t){return t.name===e}))).length>0)return a.length>1&&i.ZP.warn("Received multiple events. Taking first received."),n.set(e,o.filter((function(t){return t.name!==e}))),[2,a[0]]}catch(e){u={error:e}}finally{try{r&&!r.done&&(d=t.return)&&d.call(t)}finally{if(u)throw u.error}}return void 0===(s=this.waitingListenersByEventType.get(e))&&(s=[],this.waitingListenersByEventType.set(e,s)),[4,new Promise((function(e){s&&(c=e,s.push(e))}))];case 1:return l=p.sent(),c&&(i.ZP.debug('Removing event listener for "'.concat(e,'".')),this.waitingListenersByEventType.set(e,s.filter((function(e){return e!==c})))),[2,l]}}))}))},this.waitForEventFromSource=function(e,r){return D(t,void 0,void 0,(function(){var t,n,o,a,s,c;return j(this,(function(l){switch(l.label){case 0:return(t=this.pendingEventsByMessageEventSource.get(r))&&(n=null!==(c=t.get(e))&&void 0!==c?c:[],(o=n.filter((function(t){return t.name===e}))).length>0)?(o.length>1&&i.ZP.warn("Received multiple events. Taking first received."),t.set(e,n.filter((function(t){return t.name!==e}))),[2,o[0]]):(void 0===(a=this.waitingListenersByEventTypeByMessageEventSource.get(r))&&(a=new Map,this.waitingListenersByEventTypeByMessageEventSource.set(r,a)),[4,new Promise((function(t){if(void 0===a)throw new g.i("listenersByWindow is undefined");a.set(e,t)}))]);case 1:return s=l.sent(),a.delete(e),[2,s]}}))}))},this.waitForEventFromSourceOrThrowAfterGivenTime=function(e,r,n){void 0===n&&(n=1e4);var o=t.waitForEventFromSource(e,r),i=new Promise((function(t,r){setTimeout((function(){r(new g.F("Could not retrieve event ".concat(e," in given time (").concat(n,"ms)."),{shouldReport:!1}))}),n)}));return Promise.race([o,i])},this.postMessageEventListener=function(e){var r,n;if((0,_.$)(e)&&(0,v.ot)(e.data)&&e.source){var o=e.source;if(e.data.key!==t.projectKey)return void i.ZP.debug("Received event with different key.",e);(0,v.LT)(e.data)&&!t.isClosed&&(i.ZP.debug("Received discovery. Sending discovered response",e),t.sendEventToSource({name:v.lL.DISCOVERED,key:t.projectKey,sessionId:window.smartlook.sessionId},o)),(0,v.hd)(e.data)&&!t.isClosed&&(i.ZP.debug("Received discovered. Sending acknowledged response",e),t.sendEventToSource({name:v.lL.ACKNOWLEDGED,key:t.projectKey},o),t.discoveredIframeWindows.add(e.source));var a=t.eventListenersByEventType.get(e.data.name);if(a){i.ZP.debug("Found listeners for event - ".concat(e.data.name,"."),e);try{for(var s=N(a),c=s.next();!c.done;c=s.next())(0,c.value)(e.data)}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}var l=t.waitingListenersByEventTypeByMessageEventSource.get(e.source);if(l){var u=l.get(e.data.name);u&&(i.ZP.debug("Found waiting listener for event - ".concat(e.data.name,".")),u(e.data))}var d=t.waitingListenersByEventType.get(e.data.name);if(d&&d.length>0&&(i.ZP.debug("Found waiting listener from any source for event - ".concat(e.data.name,".")),d.forEach((function(t){return t(e.data)}))),l||a||d&&d.length>0)return;i.ZP.debug("No pending listener found for ".concat(e.data.name,"."));var f=t.pendingEventsByMessageEventSource.get(e.source);if(f){var p=f.get(e.data.name);p?(p.push(e.data),f.set(e.data.name,p)):f.set(e.data.name,[e.data])}else{var g=new Map;g.set(e.data.name,[e.data]),t.pendingEventsByMessageEventSource.set(e.source,g)}}},window.addEventListener("message",this.postMessageEventListener)},F=function(e){var t=this;this.persistentStorageManager=e,this.applyRetryAfter=function(e){var r=Date.now()+1e3*e;t.persistentStorageManager.setSetupRetryAfter(r.toString())},this.getAppliedRetryAfterReason=function(){return t.persistentStorageManager.getSetupRetryAfterExpireReason()},this.isAppliedRetryAfter=function(){var e=t.persistentStorageManager.getSetupRetryAfterExpire();return e&&Number.parseInt(e,10)>Date.now()?!(Number.parseInt(e,10)-Date.now()>6048e5&&(i.ZP.errorNoConsole("Value of `setupRetryAfterExpire` is greater than one week. Ignoring it.",{currentTime:Date.now(),currentTimeISO:(new Date).toISOString(),setupRetryAfterExpire:e}),t.removeRetryAfterValues(),1)):(t.removeRetryAfterValues(),!1)},this.removeRetryAfterValues=function(){t.persistentStorageManager.removeSetupAfterExpireReason(),t.persistentStorageManager.removeSetupAfterExpire()},this.setAppliedRetryAfterReason=function(e){t.persistentStorageManager.setSetupRetryAfterReason(e)}},U=function(e,t){var r,n=new A({useCookies:e.cookies,storageKeys:e.storageKeys}),o=new T,a=new I(n,(function(){return window.smartlook("reinit",e.projectKey,t)}),(function(){return window.smartlook("stop")}),e.banTime);e.externalLogging&&(r=new x(e)),i.ZP.setLoggingLevel(n.isRecorderInDebugMode()?i.in.DEBUG:e.loggingLevel);var s=new B(e.projectKey);return r&&i.ZP.setMiddleware(r.sendLog),{persistentStorageManager:n,banService:a,timeManager:o,postMessageService:s,setupRetryAfterService:new F(n)}},Z=function(e){Object.defineProperties(window.smartlook,{consent:{get:function(){console.warn("This API (`window.smartlook.consent`) is no longer working. Please migrate to new `record` API. See more at https://docs.smartlook.com/docs/web/consent-sensitive-data guide.")}},playUrl:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook.playUrl:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.playUrl}catch(e){i.ZP.debug("Cannot get playUrl: ".concat(e))}}},sessionId:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook.sessionId:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.sessionId}catch(e){i.ZP.debug("Cannot get sessionId: ".concat(e))}}},visitorId:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.top&&window.top.smartlook?window.top.smartlook.visitorId:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.visitorId}catch(e){i.ZP.debug("Cannot get visitorId: ".concat(e))}}},recordId:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook.recordId:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.recordId}catch(e){i.ZP.debug("Cannot get recordId: ".concat(e))}}},key:{get:function(){try{return e.projectKey}catch(e){i.ZP.debug("Cannot get key: ".concat(e))}}},version:{get:function(){return e.recorderVersion}},_debugData:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook._debugData:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.debugData}catch(e){i.ZP.debug("Cannot get _debugData: ".concat(e))}}},isIframeModeEnabled:{get:function(){return e.isCrossOriginIframeMode||void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)}}})},V=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},G=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},H=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},J=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},Y=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return V(void 0,void 0,void 0,(function(){var o,a,s,c,l,u,d,f,p,v,y,h,m;return G(this,(function(w){switch(w.label){case 0:if(w.trys.push([0,28,,29]),r&&r.isCrossOriginIframeMode&&("string"!=typeof e||["track","properties","navigation","error"].includes(e)||console.debug("Smartlook is loaded in iframe. Calling '".concat(e,"' API in iframe is disabled. Please call it in parent page."))),"finish"===e)return o=n,window.smartlook.recorder?(s=window.smartlook.recorder).finishAllQueuedTasks.apply(s,J([],H(n),!1)):o[0](),[2];if("stop"===e)return window.smartlook.recorder&&(c=window.smartlook.recorder).stopRecording.apply(c,J([],H(n),!1)),[2];if(t.isAppliedBan())return i.ZP.warn("Cannot call smartlook API. Session is banned. Reason: ".concat(t.getBanReason(),".")),[2];if(!window.smartlook.recorder)return i.ZP.warn("Smartlook is not initialized. Cannot call public api."),[2];switch(e){case"record":return[3,1];case"resume":return[3,3];case"pause":return[3,5];case"error":return[3,7];case"track":return[3,9];case"navigation":return[3,11];case"disable":return[3,13];case"properties":return[3,17];case"identify":return[3,19];case"anonymize":return[3,21];case"consentIP":return[3,23];case"consentAPI":return[3,24];case"consentForms":return[3,25]}return[3,26];case 1:return[4,(l=window.smartlook.recorder).setRecording.apply(l,J([],H(n),!1))];case 2:return w.sent(),[3,27];case 3:return[4,(u=window.smartlook.recorder).resumeRecording.apply(u,J([],H(n),!1))];case 4:return w.sent(),[3,27];case 5:return[4,(d=window.smartlook.recorder).pauseRecording.apply(d,J([],H(n),!1))];case 6:return w.sent(),[3,27];case 7:return[4,(f=window.smartlook.recorder).logCustomError.apply(f,J([],H(n),!1))];case 8:return w.sent(),[3,27];case 9:return[4,(p=window.smartlook.recorder).logCustomEvent.apply(p,J([],H(n),!1))];case 10:return w.sent(),[3,27];case 11:return[4,(v=window.smartlook.recorder).changeUrl.apply(v,J([],H(n),!1))];case 12:return w.sent(),[3,27];case 13:return!0!==n[0]?[3,14]:(window.smartlook.recorder.pauseRecording(),[3,16]);case 14:return!1!==n[0]?[3,16]:[4,window.smartlook.recorder.resumeRecording()];case 15:w.sent(),w.label=16;case 16:return[3,27];case 17:return[4,(y=window.smartlook.recorder).setCustomEventProperties.apply(y,J([],H(n),!1))];case 18:return w.sent(),[3,27];case 19:return[4,(h=window.smartlook.recorder).identifyVisitor.apply(h,J([],H(n),!1))];case 20:return w.sent(),[3,27];case 21:return[4,(m=window.smartlook.recorder).anonymize.apply(m,J([],H(n),!1))];case 22:return w.sent(),[3,27];case 23:return console.warn("This API (`consentIP`) is no longer working. Please migrate to new `record` API. See more at https://docs.smartlook.com/docs/web/consent-sensitive-data guide."),[3,27];case 24:return console.warn("This API (`consentAPI`) is no longer working. Please migrate to new `record` API. See more at https://docs.smartlook.com/docs/web/consent-sensitive-data guide."),[3,27];case 25:return console.warn("This API (`consentForms`) is no longer working. Please migrate to new `record` API. See more at https://docs.smartlook.com/docs/web/consent-sensitive-data guide."),[3,27];case 26:return"function"==typeof e&&e(),[3,27];case 27:return[3,29];case 28:return(a=w.sent())instanceof g.i&&!a.shouldReport?i.ZP.warn(a.message):a instanceof Error?console.warn(a.message,a):console.error(JSON.stringify(a)),[3,29];case 29:return[2]}}))}))},W=function(){return W=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},W.apply(this,arguments)},q=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},z=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},X=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},$=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};o.p=null===document.currentScript?window.smartlook.scriptSource+"es6/":window.smartlook.scriptSource+"es5/";var Q,ee,te,re,ne,oe,ie,ae,se,ce,le=!1,ue=!1,de=!0,fe=[],pe=[],ve=!1,ge=!1,ye=0,he=!1,me=!1,we=!1,be=performance.now(),Se=function(e){void 0===window.smartlook._apiCallsHistory&&(window.smartlook._apiCallsHistory=[]),window.smartlook._apiCallsHistory.push(["function"==typeof e?"function":e,performance.now()-be]),window.smartlook._apiCallsHistory.length>15&&window.smartlook._apiCallsHistory.shift()},Oe=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return q(void 0,void 0,void 0,(function(){var r,l,u,d,f,k,A,T,I,_,L,P,M,K,C,x,D,j,N,B,F,V,G,H,J,q,be,Ee,Re,ke,Ae,Te;return z(this,(function(z){switch(z.label){case 0:if(Se(e),h())return console.warn("Smartlook is disabled. Bot detected."),[2];if(!m())return console.warn("Smartlook is not recording. Unsupported browser detected."),[2];if("init"===e&&ye<1||"reinit"===e){if(ce=t[0],se=null!==(be=t[1])&&void 0!==be?be:{},"string"==typeof ce&&(ce=ce.trim()),void 0===ce||"string"==typeof ce&&0===ce.length)return console.warn("Smartlook could not be initialized. Provided project key is empty."),"reinit"===e&&(he=!1),[2];if(!(ae=p(ce,"v1.22.4-7-gecfc4450",null!=se?se:{})).enableRecordingOfAutomationFrameworks&&navigator.webdriver)return console.warn("Smartlook is stopped. Automation framework is detected."),[2];we||(Z(ae),ve||(r=U(ae,se),oe=r.persistentStorageManager,re=r.banService,ie=r.timeManager,te=r.postMessageService,ne=r.setupRetryAfterService,ve=!0),we=!0)}return ce&&b()?(i.ZP.debug("Smartlook loaded in parent window."),le?(i.ZP.debug("Smartlook is already initialized in iframe. No API calls will be proxied."),[3,4]):[3,1]):[3,4];case 1:return S(ce)?(i.ZP.debug("Detected smartlook in parent window. API calls 'navigate', 'track', 'properties', 'navigation' and 'error' will be proxied there. All the other will be silently ignored."),"string"==typeof e&&["track","properties","navigation","error"].includes(e)?(i.ZP.debug("Sending API call ".concat(e," to parent window.")),[2,null===(Ee=window.top)||void 0===Ee?void 0:Ee.smartlook.apply(Ee,$([e],X(t),!1))]):"init"===e?(i.ZP.debug("Smartlook in parent window is initialized and records to same project."),l=$([],X(pe),!1),pe=[],queueMicrotask((function(){l.forEach((function(e){var t=X(e,3),r=t[0],n=t[1],o=t[2];Oe.apply(void 0,$([r],X(o),!1)).finally(n)}))})),[2]):(console.debug("Smartlook is loaded in same-origin iframe. Calling '".concat(e,"' API in iframe is disabled. Please call it in parent page.")),[2])):[3,2];case 2:return"init"!==e?[3,4]:(i.ZP.debug("Waiting for smartlook in parent window to initialize."),[4,O()]);case 3:if(z.sent(),S(ce))return i.ZP.debug("Smartlook in parent window is initialized and records to same project."),u=$([],X(pe),!1),pe=[],queueMicrotask((function(){u.forEach((function(e){var t=X(e,3),r=t[0],n=t[1],o=t[2];Oe.apply(void 0,$([r],X(o),!1)).finally(n)}))})),[2];i.ZP.debug("Smartlook in parent window is initialized but records to different project."),z.label=4;case 4:return"visitor_blocked"!==ee||!ae||"identify"!==e||me?[3,6]:(me=!0,d=X(t,1),"string"!=typeof(f=d[0])&&"number"!=typeof f||"string"==typeof f&&!f?(console.warn("Invalid user id passed to smartlook('identify', ...). Received: ".concat(f)),me=!1,[2]):(k=new Promise((function(r){pe.unshift([e,r,t]),pe.unshift.apply(pe,$([],X(fe),!1))})).finally((function(){me=!1})),void 0===ce||void 0===se?(i.ZP.error("Cannot run reinit. Project key or init options are not defined.",{projectKey:ce,initOptions:se}),[2]):[4,Oe("reinit",ce,W(W({},se),{userId:String(f)}))]));case 5:return z.sent(),[2,k];case 6:return["init","finish","reinit"].includes(e)||le&&!he?"init"!==e&&"reinit"!==e?[3,35]:void 0===ae?(i.ZP.warn("Config is undefined."),[2]):("reinit"===e&&(he=!0),"init"===e&&(ye+=1),ye>1?("string"==typeof(A=t[0])&&A.trim()!==ae.projectKey?console.warn("Smartlook init method called twice with different project keys (".concat(ae.projectKey,", ").concat(A.trim(),").")):i.ZP.debug("Init called ".concat(ye,"x times. Skipping initialization.")),"reinit"===e&&(he=!1),[2]):(i.ZP.debug("Init called."),T=t[2],re.isAppliedBan()?(i.ZP.debug("BAN is applied. Initialization is postponed."),T&&T(),"reinit"===e&&(he=!1),[2]):a.MN()&&ae.startRecordingAfterUserActivity?[4,(0,E.X)(te)]:[3,8])):[2,new Promise((function(r){pe.push([e,r,t])}))];case 7:z.sent(),z.label=8;case 8:if(!a.PJ()||a.Yp()||null===window.top)return[3,14];i.ZP.debug("Sending discovered event to parent window event.",window.location.href),te.sendEventToSource({name:v.lL.DISCOVERED,key:ae.projectKey,sessionId:void 0},window.parent),z.label=9;case 9:return z.trys.push([9,12,,13]),i.ZP.debug("Waiting for acknowledged event from parent.",window.location.href),[4,te.waitForEventFromSourceOrThrowAfterGivenTime(v.lL.ACKNOWLEDGED,window.parent)];case 10:return z.sent(),(0,E.X)().then((function(){void 0!==ae&&(i.ZP.debug("Sending user activity event to parent.",window.location.href),te.sendEventToSource({name:v.lL.USER_ACTIVITY,key:ae.projectKey},window.parent))})),i.ZP.debug("Waiting for start recording event from parent.",window.location.href),[4,te.waitForEventFromSource(v.lL.START_RECORDING,window.top)];case 11:return n=z.sent(),[3,13];case 12:return(I=z.sent())instanceof g.F&&(i.ZP.debug("Could not receive post message in `init`. Timeout exceeded.",window.location.href),te.close()),i.ZP.warn("Error happened during receiving post message from parent in `init`. Continuing normal recording.",I,window.location.href,document.visibilityState),[3,13];case 13:n&&(i.ZP.debug("Received start recording event",n,window.location.href),ae.frameElementId=n.frameElementId,ae.parentFrameElementId=n.parentFrameElementId,ae.relativeParentTimeStart=n.relativeTime,ae.frameMetadata=n.frameMetadata,i.ZP.debug("Attaching START_RECORDING event listener.",window.location.href),te.addPostMessageEventListener(v.lL.START_RECORDING,(function(e){var t;if(!ae)throw new g.i("Config is undefined",{shouldReport:!0});ae.frameElementId=e.frameElementId,ae.parentFrameElementId=e.parentFrameElementId,ae.relativeParentTimeStart=e.relativeTime,ae.frameMetadata=e.frameMetadata,null===(t=window.smartlook.recorder)||void 0===t||t.startRecording(e.sessionId,e.visitorId,e.recordId,e.setupData)})),i.ZP.debug("Attaching STOP_RECORDING event listener."),te.addPostMessageEventListener(v.lL.STOP_RECORDING,(function(){var e;null===(e=window.smartlook.recorder)||void 0===e||e.stopRecording()}))),z.label=14;case 14:return _=(0,w.K)(ae,oe),L=void 0,P=void 0,M=void 0,K=void 0,void 0!==n?[3,16]:[4,(0,w.d)(_,ae,oe)];case 15:return C=z.sent(),L=C.sessionId,P=C.visitorId,M=(0,y.O)(),K=C.sessionTimeRemaining,[3,17];case 16:L=n.sessionId,P=n.visitorId,M=n.recordId,z.label=17;case 17:x=void 0,z.label=18;case 18:if(z.trys.push([18,32,33,34]),!ne.isAppliedRetryAfter()||me)return[3,19];if(H=ne.getAppliedRetryAfterReason(),de=!1,Q="setup call is throttled",ee="spamming_visitor",H)try{(D=JSON.parse(H)).code&&(ee=D.code),D.message&&(Q=D.message)}catch(e){}return console.warn("Smartlook not recording. Reason: ".concat(Q,".")),[3,31];case 19:return n?(N={setupData:n.setupData,response:void 0},[3,22]):[3,20];case 20:return[4,(0,s.O5)({config:ae,sessionId:L,visitorId:P})];case 21:N=z.sent(),z.label=22;case 22:if(!(x=(j=N).setupData).recordingAllowed)return[3,30];if(ne.removeRetryAfterValues(),oe.setMetadata(L,P,ae.projectKey),ie.setServerTime(x.serverTime),de=!0,ee=void 0,Q=void 0,ue)return[3,27];z.label=23;case 23:return z.trys.push([23,25,,26]),[4,o.e(296).then(o.bind(o,181))];case 24:return z.sent(),[3,26];case 25:return(B=z.sent())instanceof Error&&B.message.includes("is not a function")?console.warn("Smartlook could not be initialized. This site uses unsupported version of Prototype.JS library which contains some bugs. We advise you to upgrade to latest version in order to make smartlook recording. For more information do not hesitate to contact our customer support."):console.warn("Could not load smartlook bundle. Smartlook will not record this page."),ge=!0,[3,26];case 26:ge||(R(ae,oe,ne,re,ie,te),ue=!0),z.label=27;case 27:return ge?[3,29]:(void 0!==K&&K<x.recording.maxRecordDuration/3&&(L=(0,y.O)()),[4,null===(Re=window.smartlook.recorder)||void 0===Re?void 0:Re.startRecording(L,P,M,x,K)]);case 28:z.sent(),z.label=29;case 29:return[3,31];case 30:F=j.response,(V=null==F?void 0:F.headers.get("Retry-After"))&&(ne.applyRetryAfter(Number.parseInt(V,10)),ne.setAppliedRetryAfterReason(JSON.stringify(x.error))),de=!1,Q=null===(ke=x.error)||void 0===ke?void 0:ke.message,ee=null===(Ae=x.error)||void 0===Ae?void 0:Ae.code,(null===(Te=x.error)||void 0===Te?void 0:Te.message)?console.warn("Smartlook not recording. Reason: ".concat(x.error.message,".")):console.warn("Smartlook not recording."),z.label=31;case 31:return[3,34];case 32:return G=z.sent(),H=G instanceof Error?G.message:"Unknown reason /setup",G instanceof c.M?(J=G.isAbortedByUserAgent&&"hidden"===G.visibilityState,[404,422].includes(G.status)?(de=!1,G.responseData&&"string"!=typeof G.responseData?(Q="string"==typeof G.responseData.message?G.responseData.message:"Unknown reason",ee="string"==typeof G.responseData.code?G.responseData.code:"unknown_code"):(Q="Unknown reason",ee="unknown_code"),console.warn("Smartlook not recording. Reason: ".concat(Q),G.responseData),i.ZP.warnNoConsole("Setup failed. Reason: ".concat(H,"."),G,fetch.toString())):J||re.applyBan(new g.i("Setup failed. Reason: ".concat(H,"."),{originalError:G,shouldReport:!G.isConnectionError}))):G instanceof Error&&(G.message.includes("Cannot set properties of undefined (setting 'sessionManager')")||G.message.includes("undefined is not an object (evaluating 'this.sessionManager=e')")||G.message.includes("this is undefined")||G.message.includes("Unable to set property 'sessionManager' of undefined or null reference"))?(ge=!0,console.warn("Smartlook could not be initialized. This site uses unsupported version of Prototype.JS library which contains some bugs. We advise you to upgrade to latest version in order to make smartlook recording. For more information do not hesitate to contact our customer support.")):re.applyBan(new g.i('Setup failed. Reason: "'.concat(H,'".'),{originalError:G instanceof Error?G:void 0})),[3,34];case 33:return le=!0,[7];case 34:return"reinit"===e&&(he=!1),q=$([],X(pe),!1),pe=[],queueMicrotask((function(){q.forEach((function(e){var t=X(e,3),r=t[0],n=t[1],o=t[2];Oe.apply(void 0,$([r],X(o),!1)).finally(n)}))})),T&&T(),[2];case 35:return de||"finish"===e?ge?(i.ZP.debug("Cannot call ".concat(e,". Bundle failed to load.")),[2]):[3,36]:(i.ZP.warn("Cannot call ".concat(e,". Recording is disabled. Reason ").concat(null!=Q?Q:"unknown",".")),"visitor_blocked"===ee&&fe.push([e,function(){return null},t]),[2]);case 36:return[4,Y.apply(void 0,$([e,re,ae],X(t),!1))];case 37:z.sent(),z.label=38;case 38:return[2]}}))}))},Ee=null!==(t=null===(e=window.smartlook)||void 0===e?void 0:e.api)&&void 0!==t?t:[],Re=null===(r=window.smartlook)||void 0===r?void 0:r.isRecorderScriptLoaded,ke=window.smartlook.scriptSource;window.smartlook=Oe,window.smartlook.isRecorderScriptLoaded=Re,window.smartlook.scriptSource=ke,Ee.forEach((function(e){var t=X($([],X(e),!1)),r=t[0],n=t.slice(1);window.smartlook.apply(window,$([r],X(n),!1))}))}()}();